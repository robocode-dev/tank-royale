<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.13" />
    <style>
      :root {
        --c-bg: #fff;
      }

      html.dark {
        --c-bg: #22272e;
      }

      html,
      body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        window.matchMedia &&
        window.matchMedia('(prefers-color-scheme: dark)').matches
      if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
        document.documentElement.classList.toggle('dark', true)
      }
    </script>
    <link rel="icon" href="/favicon.ico"><title>My First Bot for Python | Robocode Tank Royale Docs</title><meta name="description" content="Documentation for the programming game Robocode Tank Royale.">
    <link rel="preload" href="/tank-royale/assets/style.css" as="style"><link rel="stylesheet" href="/tank-royale/assets/style.css">
    <link rel="modulepreload" href="/tank-royale/assets/app.js"><link rel="modulepreload" href="/tank-royale/assets/my-first-bot-for-python.html.js">
    <link rel="prefetch" href="/tank-royale/assets/index.html.js" as="script"><link rel="prefetch" href="/tank-royale/assets/apis.html.js" as="script"><link rel="prefetch" href="/tank-royale/assets/tools.html.js" as="script"><link rel="prefetch" href="/tank-royale/assets/anatomy.html.js" as="script"><link rel="prefetch" href="/tank-royale/assets/booter.html.js" as="script"><link rel="prefetch" href="/tank-royale/assets/coordinates-and-angles.html.js" as="script"><link rel="prefetch" href="/tank-royale/assets/debug.html.js" as="script"><link rel="prefetch" href="/tank-royale/assets/game_types.html.js" as="script"><link rel="prefetch" href="/tank-royale/assets/gui.html.js" as="script"><link rel="prefetch" href="/tank-royale/assets/history.html.js" as="script"><link rel="prefetch" href="/tank-royale/assets/installation.html.js" as="script"><link rel="prefetch" href="/tank-royale/assets/intro.html.js" as="script"><link rel="prefetch" href="/tank-royale/assets/physics.html.js" as="script"><link rel="prefetch" href="/tank-royale/assets/scoring.html.js" as="script"><link rel="prefetch" href="/tank-royale/assets/tank-royale.html.js" as="script"><link rel="prefetch" href="/tank-royale/assets/tps.html.js" as="script"><link rel="prefetch" href="/tank-royale/assets/beyond-the-basics.html.js" as="script"><link rel="prefetch" href="/tank-royale/assets/getting-started.html.js" as="script"><link rel="prefetch" href="/tank-royale/assets/my-first-bot.html.js" as="script"><link rel="prefetch" href="/tank-royale/assets/my-first-bot-for-jvm.html.js" as="script"><link rel="prefetch" href="/tank-royale/assets/my-first-bot-for-dotnet.html.js" as="script"><link rel="prefetch" href="/tank-royale/assets/404.html.js" as="script"><link rel="prefetch" href="/tank-royale/assets/mermaid.core.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon"><!--[--><header class="vp-navbar"><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/tank-royale/"><img class="vp-site-logo" src="/tank-royale/Tank-logo.svg" alt="Robocode Tank Royale Docs"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">Robocode Tank Royale Docs</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><!----><!--[--><!--]--><!----><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar"><!----><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/tank-royale/articles/intro.html" aria-label="What is Robocode?"><!---->What is Robocode?<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/tank-royale/articles/installation.html" aria-label="Installing and running Robocode"><!---->Installing and running Robocode<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/tank-royale/articles/gui.html" aria-label="The GUI"><!---->The GUI<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/tank-royale/tutorial/getting-started.html" aria-label="Getting Started"><!---->Getting Started<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/tank-royale/tutorial/my-first-bot.html" aria-label="My First Bot tutorial"><!---->My First Bot tutorial<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/tank-royale/api/apis.html" aria-label="API Documentation"><!---->API Documentation<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/tank-royale/tutorial/beyond-the-basics.html" aria-label="Beyond the Basics"><!---->Beyond the Basics<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/tank-royale/articles/debug.html" aria-label="Debugging"><!---->Debugging<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/tank-royale/articles/anatomy.html" aria-label="Anatomy"><!---->Anatomy<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/tank-royale/articles/coordinates-and-angles.html" aria-label="Coordinates and Angles"><!---->Coordinates and Angles<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/tank-royale/articles/physics.html" aria-label="Physics"><!---->Physics<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/tank-royale/articles/scoring.html" aria-label="Scoring"><!---->Scoring<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/tank-royale/articles/booter.html" aria-label="Booter"><!---->Booter<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/tank-royale/articles/tank-royale.html" aria-label="Tank Royale vs original Robocode"><!---->Tank Royale vs original Robocode<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/tank-royale/articles/history.html" aria-label="History of Robocode"><!---->History of Robocode<!----></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="my-first-bot-for-python" tabindex="-1"><a class="header-anchor" href="#my-first-bot-for-python"><span>My First Bot for Python</span></a></h1><h2 id="introduction" tabindex="-1"><a class="header-anchor" href="#introduction"><span>Introduction</span></a></h2><p>This tutorial is meant for the Python platform and a continuation of <a class="route-link" href="/tank-royale/tutorial/my-first-bot.html">My First Bot</a> tutorial.</p><p>The programming language used in this tutorial is <a href="https://www.python.org/doc/" title="Python documentation" target="_blank" rel="noopener noreferrer">Python</a>, which is a very popular language for beginners and pros alike. This tutorial assumes you are already familiar with basic <a href="https://www.python.org/doc/" title="Python documentation" target="_blank" rel="noopener noreferrer">Python</a> programming. It should suit well for practicing your Python skills by making a bot for Robocode Tank Royale.</p><h2 id="programming" tabindex="-1"><a class="header-anchor" href="#programming"><span>Programming</span></a></h2><h3 id="python-api" tabindex="-1"><a class="header-anchor" href="#python-api"><span>Python API</span></a></h3><p>The documentation of the Python API for Robocode Tank Royale is available on <a class="route-link" href="/tank-royale/api/apis.html">this page</a>.</p><h3 id="create-a-source-file" tabindex="-1"><a class="header-anchor" href="#create-a-source-file"><span>Create a source file</span></a></h3><p>Inside your bot directory (<code>../bots/MyFirstBot</code>) create a Python source file named <code>MyFirstBot.py</code>. You can edit that file using a text editor of your choice, or an <a href="https://en.wikipedia.org/wiki/Integrated_development_environment" title="Integrated development environment" target="_blank" rel="noopener noreferrer">IDE</a> like e.g. <a href="https://www.jetbrains.com/pycharm/" title="PyCharm homepage" target="_blank" rel="noopener noreferrer">PyCharm</a> or <a href="https://code.visualstudio.com/" title="Visual Studio Code homepage" target="_blank" rel="noopener noreferrer">Visual Studio Code</a>.</p><h3 id="initial-code" tabindex="-1"><a class="header-anchor" href="#initial-code"><span>Initial code</span></a></h3><p>The initial skeleton of your bot could look like this:</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre class="language-python"><code><span class="line"><span class="token keyword">import</span> asyncio</span>
<span class="line"><span class="token keyword">from</span> robocode_tank_royale<span class="token punctuation">.</span>bot_api <span class="token keyword">import</span> Bot</span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">MyFirstBot</span><span class="token punctuation">(</span>Bot<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">pass</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span></span>
<span class="line">    bot <span class="token operator">=</span> MyFirstBot<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token keyword">await</span> bot<span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&quot;__main__&quot;</span><span class="token punctuation">:</span></span>
<span class="line">    asyncio<span class="token punctuation">.</span>run<span class="token punctuation">(</span>main<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The class in this example (<code>MyFirstBot</code>) is inherited from the <a href="https://robocode-dev.github.io/tank-royale/api/python/api/bot_api.html#bot_api.Bot" title="Bot class" target="_blank" rel="noopener noreferrer">Bot</a> class from the <code>robocode_tank_royale.bot_api</code> package, which provides methods for controlling the bot and receiving events from the game. The API handles the communication with the server behind the scenes.</p><h3 id="startup-main-entry" tabindex="-1"><a class="header-anchor" href="#startup-main-entry"><span>Startup / Main entry</span></a></h3><p>The next thing we need to do is to implement the <code>main</code> entry point for our bot. The bot will run like an ordinary Python application, typically started with <code>python MyFirstBot.py</code>.</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre class="language-python"><code><span class="line"><span class="token keyword">import</span> asyncio</span>
<span class="line"></span>
<span class="line"><span class="token comment"># The main function starts our bot</span></span>
<span class="line"><span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">await</span> MyFirstBot<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&quot;__main__&quot;</span><span class="token punctuation">:</span></span>
<span class="line">    asyncio<span class="token punctuation">.</span>run<span class="token punctuation">(</span>main<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>The <code>main</code> function in this example simply creates the bot and calls its <a href="https://robocode-dev.github.io/tank-royale/api/python/api/bot_api.html#bot_api.Bot.start" title="start() method" target="_blank" rel="noopener noreferrer">start</a> method, which will let the bot start up reading configuration and start communicating with the server.</p><p>The bot will attempt to join the server and wait for a signal to engage in a new battle, where one or multiple instances of this bot may participate.</p><p>Note that it is also possible to provide all the necessary configuration fields programmatically without a file.</p><h3 id="the-run-method" tabindex="-1"><a class="header-anchor" href="#the-run-method"><span>The run method</span></a></h3><p>When the game starts the bot, the <a href="https://robocode-dev.github.io/tank-royale/api/python/api/bot_api.html#bot_api.bot.Bot.run" title="run() method" target="_blank" rel="noopener noreferrer">run</a> method will be called. Hence, your bot should override this method to provide the logic for the bot when the game is started. The <a href="https://robocode-dev.github.io/tank-royale/api/python/api/bot_api.html#bot_api.bot.Bot.run" title="run() method" target="_blank" rel="noopener noreferrer">run</a> method should do all required initializing. After that, it should enter a loop that runs until the game is ended.</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre class="language-python"><code><span class="line"><span class="token keyword">class</span> <span class="token class-name">MyFirstBot</span><span class="token punctuation">(</span>Bot<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment"># Called when a new round is started -&gt; initialize and do some movement</span></span>
<span class="line">    <span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token comment"># Repeat while the bot is running</span></span>
<span class="line">        <span class="token keyword">while</span> self<span class="token punctuation">.</span>is_running<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">            <span class="token keyword">await</span> self<span class="token punctuation">.</span>forward<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token keyword">await</span> self<span class="token punctuation">.</span>turn_gun_left<span class="token punctuation">(</span><span class="token number">360</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token keyword">await</span> self<span class="token punctuation">.</span>back<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token keyword">await</span> self<span class="token punctuation">.</span>turn_gun_left<span class="token punctuation">(</span><span class="token number">360</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>With the code above, the bot will run in a loop, starting by moving forward 100 units. Then it will turn the gun 360°, move back 100 units, and turn the gun 360° again. So the bot will continuously move forward and back all the time and rotate the gun between moving.</p><p>When leaving the <a href="https://robocode-dev.github.io/tank-royale/api/python/api/bot_api.html#bot_api.bot.Bot.run" title="run() method" target="_blank" rel="noopener noreferrer">run</a> method, the bot will not be able to send new commands each round besides code that runs in event handlers. Therefore, a loop is used for preventing the <a href="https://robocode-dev.github.io/tank-royale/api/python/api/bot_api.html#bot_api.bot.Bot.run" title="run() method" target="_blank" rel="noopener noreferrer">run</a> method from exiting. However, we should stop the loop as soon as the bot is no longer running, and hence need to exit the <a href="https://robocode-dev.github.io/tank-royale/api/python/api/bot_api.html#bot_api.bot.Bot.run" title="run() method" target="_blank" rel="noopener noreferrer">run</a> method when <code>is_running()</code> returns <code>False</code>.</p><p>The <a href="https://robocode-dev.github.io/tank-royale/api/python/api/bot_api.html#bot_api.bot.Bot.is_running" title="is_running() method" target="_blank" rel="noopener noreferrer">is_running</a> method returns a flag maintained by the API. When the bot is told to stop/terminate its execution, <a href="https://robocode-dev.github.io/tank-royale/api/python/api/bot_api.html#bot_api.bot.Bot.is_running" title="is_running() method" target="_blank" rel="noopener noreferrer">is_running</a> will automatically return <code>False</code>.</p><h3 id="event-handlers" tabindex="-1"><a class="header-anchor" href="#event-handlers"><span>Event handlers</span></a></h3><p>The <a href="https://robocode-dev.github.io/tank-royale/api/python/index.html" title="Bot API" target="_blank" rel="noopener noreferrer">Bot API</a> provides a lot of event handlers (<code>on&lt;Something&gt;</code>) that are triggered by different types of events. All event handlers in the Bot API start with the <code>on</code> prefix like e.g. <a href="https://robocode-dev.github.io/tank-royale/api/python/api/bot_api.html#bot_api.base_bot.BaseBot.on_scanned_bot" title="on_scanned_bot event handler" target="_blank" rel="noopener noreferrer">on_scanned_bot</a>. All event handlers are available with the base interfaces that the <a href="https://robocode-dev.github.io/tank-royale/api/python/api/bot_api.html#bot_api.Bot" title="Bot class" target="_blank" rel="noopener noreferrer">Bot</a> class implements.</p><p>Talking about the common <a href="https://robocode-dev.github.io/tank-royale/api/python/api/bot_api.html#bot_api.base_bot.BaseBot.on_scanned_bot" title="on_scanned_bot event handler" target="_blank" rel="noopener noreferrer">on_scanned_bot</a> event handler, we can implement this handler to fire the cannon whenever our bot scans an opponent bot:</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre class="language-python"><code><span class="line"><span class="token keyword">from</span> robocode_tank_royale<span class="token punctuation">.</span>bot_api<span class="token punctuation">.</span>events <span class="token keyword">import</span> ScannedBotEvent</span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">MyFirstBot</span><span class="token punctuation">(</span>Bot<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span>
<span class="line">    <span class="token comment"># We saw another bot -&gt; fire!</span></span>
<span class="line">    <span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">on_scanned_bot</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> e<span class="token punctuation">:</span> ScannedBotEvent<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">await</span> self<span class="token punctuation">.</span>fire<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>We can also implement another event handler <a href="https://robocode-dev.github.io/tank-royale/api/python/api/bot_api.html#bot_api.base_bot.BaseBot.on_hit_by_bullet" title="on_hit_by_bullet event handler" target="_blank" rel="noopener noreferrer">on_hit_by_bullet</a> to let the bot attempt to avoid new bullet hits by turning the bot perpendicular to the bullet direction:</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre class="language-python"><code><span class="line"><span class="token keyword">from</span> robocode_tank_royale<span class="token punctuation">.</span>bot_api<span class="token punctuation">.</span>events <span class="token keyword">import</span> HitByBulletEvent</span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">MyFirstBot</span><span class="token punctuation">(</span>Bot<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span></span>
<span class="line">    <span class="token comment"># We were hit by a bullet -&gt; turn perpendicular to the bullet</span></span>
<span class="line">    <span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">on_hit_by_bullet</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> e<span class="token punctuation">:</span> HitByBulletEvent<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token comment"># Calculate the bearing to the direction of the bullet</span></span>
<span class="line">        bearing <span class="token operator">=</span> self<span class="token punctuation">.</span>calc_bearing<span class="token punctuation">(</span>e<span class="token punctuation">.</span>bullet<span class="token punctuation">.</span>direction<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment"># Turn 90 degrees to the bullet direction based on the bearing</span></span>
<span class="line">        <span class="token keyword">await</span> self<span class="token punctuation">.</span>turn_right<span class="token punctuation">(</span><span class="token number">90</span> <span class="token operator">-</span> bearing<span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Note that the <a href="https://robocode-dev.github.io/tank-royale/api/python/index.html" title="Bot API" target="_blank" rel="noopener noreferrer">Bot API</a> provides helper methods like <code>calc_bearing</code> to ease calculating angles and bearings in the game.</p><h3 id="putting-it-all-together" tabindex="-1"><a class="header-anchor" href="#putting-it-all-together"><span>Putting it all together</span></a></h3><p>Okay, let us put all the parts together in a single source file:</p><div class="language-python line-numbers-mode" data-highlighter="prismjs" data-ext="py" data-title="py"><pre class="language-python"><code><span class="line"><span class="token keyword">import</span> asyncio</span>
<span class="line"></span>
<span class="line"><span class="token keyword">from</span> robocode_tank_royale<span class="token punctuation">.</span>bot_api <span class="token keyword">import</span> Bot</span>
<span class="line"><span class="token keyword">from</span> robocode_tank_royale<span class="token punctuation">.</span>bot_api<span class="token punctuation">.</span>events <span class="token keyword">import</span> ScannedBotEvent<span class="token punctuation">,</span> HitByBulletEvent</span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token keyword">class</span> <span class="token class-name">MyFirstBot</span><span class="token punctuation">(</span>Bot<span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token comment"># Called when a new round is started -&gt; initialize and do some movement</span></span>
<span class="line">    <span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">run</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token comment"># Repeat while the bot is running</span></span>
<span class="line">        <span class="token keyword">while</span> self<span class="token punctuation">.</span>is_running<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span></span>
<span class="line">            <span class="token keyword">await</span> self<span class="token punctuation">.</span>forward<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token keyword">await</span> self<span class="token punctuation">.</span>turn_gun_left<span class="token punctuation">(</span><span class="token number">360</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token keyword">await</span> self<span class="token punctuation">.</span>back<span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token keyword">await</span> self<span class="token punctuation">.</span>turn_gun_left<span class="token punctuation">(</span><span class="token number">360</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># We saw another bot -&gt; fire!</span></span>
<span class="line">    <span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">on_scanned_bot</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> e<span class="token punctuation">:</span> ScannedBotEvent<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token keyword">del</span> e</span>
<span class="line">        <span class="token keyword">await</span> self<span class="token punctuation">.</span>fire<span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">    <span class="token comment"># We were hit by a bullet -&gt; turn perpendicular to the bullet</span></span>
<span class="line">    <span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">on_hit_by_bullet</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> e<span class="token punctuation">:</span> HitByBulletEvent<span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span></span>
<span class="line">        <span class="token comment"># Calculate the bearing to the direction of the bullet</span></span>
<span class="line">        bearing <span class="token operator">=</span> self<span class="token punctuation">.</span>calc_bearing<span class="token punctuation">(</span>e<span class="token punctuation">.</span>bullet<span class="token punctuation">.</span>direction<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line">        <span class="token comment"># Turn 90 degrees to the bullet direction based on the bearing</span></span>
<span class="line">        <span class="token keyword">await</span> self<span class="token punctuation">.</span>turn_right<span class="token punctuation">(</span><span class="token number">90</span> <span class="token operator">-</span> bearing<span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token keyword">async</span> <span class="token keyword">def</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token boolean">None</span><span class="token punctuation">:</span></span>
<span class="line">    <span class="token keyword">await</span> MyFirstBot<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>start<span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&quot;__main__&quot;</span><span class="token punctuation">:</span></span>
<span class="line">    asyncio<span class="token punctuation">.</span>run<span class="token punctuation">(</span>main<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="running-the-bot" tabindex="-1"><a class="header-anchor" href="#running-the-bot"><span>Running the bot</span></a></h2><p>Now we have a JSON configuration file and the program for our bot. The next step is to provide the files and dependencies for running the bot application.</p><h3 id="install-the-bot-api-library" tabindex="-1"><a class="header-anchor" href="#install-the-bot-api-library"><span>Install the bot API library</span></a></h3><p>Install the Python package for the bot API using pip. You can do this globally, in a virtual environment, or in a project-specific environment.</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token comment"># Optionally create and activate a virtual environment</span></span>
<span class="line">python <span class="token parameter variable">-m</span> venv .venv</span>
<span class="line"><span class="token comment"># macOS/Linux</span></span>
<span class="line"><span class="token builtin class-name">source</span> .venv/bin/activate</span>
<span class="line"><span class="token comment"># Windows PowerShell</span></span>
<span class="line"><span class="token comment"># .venv\Scripts\Activate.ps1</span></span>
<span class="line"></span>
<span class="line"><span class="token comment"># Install the API</span></span>
<span class="line">pip <span class="token function">install</span> robocode-tankroyale-bot-api</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>Alternatively, if you downloaded the source of this repository, the Python package is located under <code>bot-api/python</code> and can be installed locally with:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line">pip <span class="token function">install</span> <span class="token parameter variable">-e</span> ./bot-api/python</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h3 id="scripts-for-starting-the-bot" tabindex="-1"><a class="header-anchor" href="#scripts-for-starting-the-bot"><span>Scripts for starting the bot</span></a></h3><p>The remaining part is to supply some script files for starting up the bot. This will ease starting up the bot from the command line. But those files are also necessary for booting up the bot from Robocode, which will look out for script files when examining the bot directory and figure out how to run the bot. The script files tell the <a class="route-link" href="/tank-royale/articles/booter.html" title="Robocode booter">booter</a> of Robocode how to start the bot, which can differ per platform and OS.</p><p>With Python it is possible to run your bot under Windows, macOS, and Linux. Hence, it is a good idea to provide script files for all these OSes, which means that we should provide a <a href="https://fileinfo.com/extension/cmd" title="Windows Command File" target="_blank" rel="noopener noreferrer">command file</a> for Windows, and a <a href="https://fileinfo.com/extension/sh" title="Bash Shell Script" target="_blank" rel="noopener noreferrer">shell script</a> for macOS and Linux.</p><p>We create a command file for Windows named <code>MyFirstBot.cmd</code> and put it into our bot directory:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">@echo off</span>
<span class="line">python MyFirstBot.py %*</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>So the <code>python MyFirstBot.py</code> part is used for starting the bot standing in the bot directory from a command prompt. You may want to use <code>python3</code> if your environment requires it.</p><p>Next, we create a shell script for macOS and Linux named <code>MyFirstBot.sh</code> and put it into our bot directory:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token shebang important">#!/usr/bin/env sh</span></span>
<span class="line">python3 <span class="token string">&quot;<span class="token variable"><span class="token variable">$(</span><span class="token function">dirname</span> <span class="token string">&quot;<span class="token variable">$0</span>&quot;</span><span class="token variable">)</span></span>/MyFirstBot.py&quot;</span> <span class="token string">&quot;<span class="token variable">$@</span>&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>Make the script executable on Unix-like systems:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token function">chmod</span> <span class="token number">755</span> MyFirstBot.sh</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Now you have everything in place to run your bot with Robocode Tank Royale.</p><p>Note that the server must be running locally (on your system) when attempting to run the bot locally; otherwise your bot will fail with an error because it cannot find the server. The server can be started using the Robocode UI.</p><h2 id="packaging-your-bot" tabindex="-1"><a class="header-anchor" href="#packaging-your-bot"><span>Packaging your bot</span></a></h2><p>If you need to package your bot for distribution, you can zip the bot directory. The zip archive should contain:</p><ul><li>Source file (.py)</li><li>Script files (.cmd and .sh)</li><li>JSON config file (.json)</li><li>Optional: A <code>requirements.txt</code> or instructions for installing <code>robocode-tankroyale-bot-api</code></li></ul><p>And then you might want to provide a <a href="https://fileinfo.com/extension/readme" title="Readme File" target="_blank" rel="noopener noreferrer">README</a> file to provide some information for other people about your bot. 😃</p><p>You can download the <code>sample-bots-python-x.y.z.zip</code> file from any <a href="https://github.com/robocode-dev/tank-royale/releases" title="Releases" target="_blank" rel="noopener noreferrer">release</a>, which provides a good example of how to package one or multiple bots into a zip archive.</p><h2 id="bot-secrets" tabindex="-1"><a class="header-anchor" href="#bot-secrets"><span>Bot Secrets</span></a></h2><p>When you run your bot outside the GUI from a terminal/shell, you only need to supply bot secrets if (and only if) the server is configured to require bots to present a secret to connect. The bot secret is one or more keys used by the server to authorize access.</p><p>When a server is running, it will automatically create a <code>server.properties</code> file. If bot secrets are required, that file will contain generated keys to be used by external bots and controllers. In that case, look for the <code>bot-secrets</code> field like this example:</p><div class="language-text line-numbers-mode" data-highlighter="prismjs" data-ext="text" data-title="text"><pre class="language-text"><code><span class="line">bots-secrets=zDuQrkCLQU5VQgytofkNrQ</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Here, the value of <code>bot-secrets</code> (e.g., <code>zDuQrkCLQU5VQgytofkNrQ</code>) is the secret your bot must supply.</p><p>A simple way to set the bot secret for the Python bot API is to set the environment variable <code>BOT_SECRETS</code> in the shell before running the bot:</p><p>Mac/Linux bash/shell:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre class="language-bash"><code><span class="line"><span class="token builtin class-name">export</span> <span class="token assign-left variable">BOT_SECRETS</span><span class="token operator">=</span>zDuQrkCLQU5VQgytofkNrQ</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Windows command line</p><div class="language-cmd line-numbers-mode" data-highlighter="prismjs" data-ext="cmd" data-title="cmd"><pre class="language-cmd"><code><span class="line">set BOT_SECRETS=zDuQrkCLQU5VQgytofkNrQ</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Windows PowerShell:</p><div class="language-powershell line-numbers-mode" data-highlighter="prismjs" data-ext="powershell" data-title="powershell"><pre class="language-powershell"><code><span class="line"><span class="token variable">$Env</span>:BOT_SECRETS = <span class="token string">&quot;zDuQrkCLQU5VQgytofkNrQ&quot;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>Note that it is also possible to provide the server secret and URL programmatically with the Bot APIs via the <code>Bot</code> constructor.</p></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><!----></div></footer><!----><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/tank-royale/assets/app.js" defer></script>
  </body>
</html>
